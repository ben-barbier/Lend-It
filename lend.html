<h1>Lend !</h1>

<div ng-init="initCtrl();">

<div class="row">
  <div class="span4"> 
    <div class="well">
      <form class="form-horizontal" action="#">
        <legend>Record a lend</legend>
        <div class="control-group">
          <label class="control-label" for="inputWhat">What :</label>
          <div class="controls">
            <input type="text" id="inputWhat" ng-model="newWhat" placeholder="What have you lent ?">
          </div>
        </div>
        <div class="control-group">
          <label class="control-label" for="inputWho">Who :</label>
          <div class="controls">
            <input type="text" id="inputWho" ng-model="newWho" placeholder="To whom you have lent ?">
          </div>
        </div>
        <div class="control-group">
          <label class="control-label" for="inputWhenAdd">When :</label>
          <div class="controls">
            <div data-date-viewmode="years" data-date-format="yyyy-mm-dd" data-date="{{newWhen}}" id="inputWhenAdd" class="datepicker input-append date">
              <input type="text" readonly="" size="16" class="span2" ng-model="newWhen" />
              <span class="add-on"><i class="icon-calendar"></i></span>
            </div>
          </div>
        </div>
        <br />
        <input type="button" id="addLendButton" class="btn btn-primary" ng-click="addLend(newWhat, newWho, newWhen);" value="Add lend" />
      </form>
    </div>
  </div>
  <div class="span8">
    
    <!-- Alerts -->
    <div id="addLendSuccess" class="alert alert-success hide">
      <button type="button" class="close">×</button>
      Lend successfully saved.
    </div>
    <div id="editLendSuccess" class="alert alert-success hide">
      <button type="button" class="close">×</button>
      Lend {{selectedLendId}} successfully updated.
    </div>
    <div id="deleteLendSuccess" class="alert alert-success hide">
      <button type="button" class="close">×</button>
      Lend {{selectedLendId}} successfully deleted.
    </div>
    <!-- /Alerts -->
    
    <table class="table table-hover table-condensed">
      <thead>
        <tr>
          <th>#</th>
          <th>What</th>
          <th>Who</th>
          <th>When</th>
          <th></th>
          <th></th>
        </tr>
      </thead>
      <tbody id="lendList"> 
          <tr ng-repeat='lend in lendList'>
            <td>{{lend.lendId}}</td>
            <td>{{lend.object}}</td>
            <td>{{lend.who}}</td>
            <td>{{lend.when}}</td>
            <td><i class="icon-pencil" ng-click="showEditLendModal(lend.lendId,lend.object,lend.who,lend.when);"></i></td>
            <td><i class="icon-trash" ng-click="showDeleteLendModal(lend.lendId,lend.object,lend.who,lend.when);"></i></td>
          </tr>
      </tbody>
    </table>
  </div>
</div>

<!-- Modal Edit -->
      <div id="editLendModal" class="modal hide fade">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
          <h3>Edit a lend</h3>
        </div>
        <div class="modal-body">
          <form class="form-horizontal" action="#">
            <div class="control-group">
              <label class="control-label" for="inputLendID">ID :</label>
              <div class="controls">
                <input type="text" id="inputWhat" ng-model="selectedLendId" disabled />
              </div>
            </div>
            <div class="control-group">
              <label class="control-label" for="inputWhat">What :</label>
              <div class="controls">
                <input type="text" id="inputWhat" placeholder="What have you lent ?" ng-model="selectedWhat" />
              </div>
            </div>
            <div class="control-group">
              <label class="control-label" for="inputWho">Who :</label>
              <div class="controls">
                <input type="text" id="inputWho" placeholder="To whom you have lent ?" ng-model="selectedWho" />
              </div>
            </div>
            <div class="control-group">
              <label class="control-label" for="inputWhenEdit">When :</label>
              <div class="controls">
                <div data-date-viewmode="years" data-date-format="yyyy-mm-dd" data-date="{{selectedWhen}}" id="inputWhenEdit" class="datepicker input-append date">
                  <input type="text" readonly="" value="{{selectedWhen}}" size="16" class="span2" />
                  <span class="add-on"><i class="icon-calendar"></i></span>
                </div>
              </div>
            </div>
            <br />
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn" data-dismiss="modal">Close</button>
          <button type="submit" class="btn btn-primary" ng-click="editLend();">Save</button>
        </div>
      </div>
<!-- /Modal Edit -->

<!-- Modal Delete -->
      <div id="deleteLendModal" class="modal hide fade">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
          <h3>Delete a lend</h3>
        </div>
        <div class="modal-body">
          <p>
             Are you sure to delete this lend ?<br /><br />
             ID : {{selectedLendId}}<br />
             Object : {{selectedWhat}}<br />
             Who : {{selectedWho}}<br />
             When : {{selectedWhen}}
          </p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn" data-dismiss="modal">Close</button>
          <button type="submit" class="btn btn-danger" ng-click="deleteLend(selectedLendId);">Delete</button>
        </div>
      </div>
<!-- /Modal Delete -->
</div>
