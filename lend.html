<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Lend-It</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <style type="text/css">
      body {
        padding-top: 60px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
      .form-horizontal .control-label{
        width: 60px;
      }
      .form-horizontal .controls {
        margin-left: 80px;
      }
    </style>
    <link href="bootstrap/css/bootstrap-responsive.min.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
<!--     <link rel="shortcut icon" href="bootstrap/ico/favicon.ico"> -->
<!--     <link rel="apple-touch-icon-precomposed" sizes="144x144" href="bootstrap/ico/apple-touch-icon-144-precomposed.png"> -->
<!--     <link rel="apple-touch-icon-precomposed" sizes="114x114" href="bootstrap/ico/apple-touch-icon-114-precomposed.png"> -->
<!--     <link rel="apple-touch-icon-precomposed" sizes="72x72" href="bootstrap/ico/apple-touch-icon-72-precomposed.png"> -->
<!--     <link rel="apple-touch-icon-precomposed" href="bootstrap/ico/apple-touch-icon-57-precomposed.png"> -->
  </head>

  <body>

	<div id="header"></div>
	    
    <div class="container">

      <h1>Lend !</h1>
      
      <div class="row">
        <div class="span4"> 
          <div class="well">
            <form class="form-horizontal" action="#">
              <legend>Record a lend</legend>
              <div id="addLendSuccess" class="alert alert-success" style="display:none;">
                <button type="button" class="close" data-dismiss="alert">×</button>
                Lend successfully saved.
              </div>
                <div class="control-group">
                  <label class="control-label" for="inputWhat">What :</label>
                  <div class="controls">
                    <input type="text" id="inputWhat" placeholder="What have you lent ?">
                  </div>
                </div>
                <div class="control-group">
                  <label class="control-label" for="inputWho">Who :</label>
                  <div class="controls">
                    <input type="text" id="inputWho" placeholder="To whom you have lent ?">
                  </div>
                </div>
                <div class="control-group">
                  <label class="control-label" for="inputWhen">When :</label>
                  <div class="controls">
                    <input type="text" id="inputWhen" placeholder="When you have lent ?" />
                  </div>
                </div>
                 <br />
                <button type="submit" id="addLendButton" class="btn btn-primary">Submit</button>
            </form>
          </div>
        </div>
        <div class="span8">
          <table class="table table-hover table-condensed">
            <thead>
              <tr>
                <th>#</th>
                <th>What</th>
                <th>Who</th>
                <th>When</th>
              </tr>
            </thead>
            <tbody id="lendList"></tbody>
          </table>
        </div>
      </div>
      
      <div id="footer"></div>
      
    </div> <!-- /container -->

    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="bootstrap/js/jquery.min.js"></script>
    <script src="bootstrap/js/bootstrap.min.js"></script>
    <script src="javascript/mustache.js"></script>
	<script>
    $(document).ready(function(){
		$('#header').load('header.inc.html');
		$('#footer').load('footer.inc.html');
	    $('#addLendButton').click(function(){
	    	$('#addLendSuccess').fadeIn();
	    });
	    
// 	    var result = $.getJSON("http://localhost:8080/services/lendList");
	    var result = {"lendList":[{"who":"Boby","lendID":1,"object":"DVD south park saison 1","when":"15/07/2012"},{"who":"Alby","lendID":2,"object":"CD bob marley","when":"20/09/2012"},{"who":"Albator","lendID":3,"object":"15 euros","when":"01/09/2012"},{"who":"Bob Dylan","lendID":4,"object":"Vélo","when":"04/04/2004"}]};
		var template = "{{#lendList}}<tr><td>{{lendID}}</td><td>{{object}}</td><td>{{who}}</td><td>{{when}}</td></tr>{{/lendList}}";
    	var html = Mustache.to_html(template, result);
    	$('#lendList').html(html);
	    
    });
    
    </script>
  </body>
</html>
